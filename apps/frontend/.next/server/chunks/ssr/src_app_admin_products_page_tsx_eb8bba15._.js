module.exports=[631,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(71987),e=a.i(2759),f=a.i(81560),g=a.i(70106);let h=(0,g.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var i=a.i(83497),j=a.i(33508);let k=(0,g.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var l=a.i(90166),m=a.i(4720);let n=(0,g.default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);function o({isOpen:a,onClose:d,productToEdit:f,onProductUpdated:g}){let[h,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)("");if((0,c.useEffect)(()=>{f?(o(f.nombre),q(f.descripcion||""),s(f.precio.toString()),u(f.stock.toString())):(o(""),q(""),s(""),u("")),w(null),A("")},[f]),!a)return null;let B=async a=>{if(a.preventDefault(),A(""),!h||!r||!t)return void A("Please fill in all required fields.");if(!f&&!v)return void A("Please select an image for the product.");y(!0);try{let a,b=new FormData;if(b.append("nombre",h),b.append("descripcion",p),b.append("precio",r),b.append("stock",t),v&&b.append("image",v),!(a=f?await fetch(`${e.API_BASE_URL}/api/products/${f.id_producto}`,{method:"PUT",body:b}):await fetch(`${e.API_BASE_URL}/api/products`,{method:"POST",body:b})).ok){let b=await a.json();A(b.error||"Failed to save product."),y(!1);return}alert(`Product ${f?"updated":"created"} successfully!`),g(),d()}catch(a){console.error(a),A("An error occurred while saving the product.")}finally{y(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-300 my-8",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-[#00a2b9] to-[#00c8d7] px-6 py-4 md:px-8 md:py-6 relative",children:[(0,b.jsx)("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-full transition-all duration-200 hover:rotate-90",onClick:d,"aria-label":"Close modal",children:(0,b.jsx)(j.X,{size:24})}),(0,b.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-white flex items-center gap-3",children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.FileText,{className:"w-7 h-7"}),"Edit Product"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Package,{className:"w-7 h-7"}),"Add New Product"]})}),(0,b.jsx)("p",{className:"text-white/90 text-sm mt-1",children:f?"Update your product information":"Fill in the details to add a new product"})]}),(0,b.jsxs)("div",{className:"p-6 md:p-8 max-h-[calc(100vh-12rem)] overflow-y-auto",children:[z&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:(0,b.jsxs)("p",{className:"text-red-700 text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"⚠️"}),z]})}),(0,b.jsxs)("form",{onSubmit:B,className:"flex flex-col gap-5",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Product Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Package,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,b.jsx)("input",{type:"text",placeholder:"Enter product name",value:h,onChange:a=>o(a.target.value),className:"w-full border-2 border-gray-200 rounded-xl pl-11 pr-4 py-3 focus:outline-none focus:border-[#00a2b9] focus:ring-4 focus:ring-[#00a2b9]/10 transition-all"})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(m.FileText,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,b.jsx)("textarea",{placeholder:"Enter product description (optional)",value:p,onChange:a=>q(a.target.value),rows:3,className:"w-full border-2 border-gray-200 rounded-xl pl-11 pr-4 py-3 focus:outline-none focus:border-[#00a2b9] focus:ring-4 focus:ring-[#00a2b9]/10 transition-all resize-none"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Price ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,b.jsx)("input",{type:"number",placeholder:"0.00",value:r,onChange:a=>s(a.target.value),className:"w-full border-2 border-gray-200 rounded-xl pl-11 pr-4 py-3 focus:outline-none focus:border-[#00a2b9] focus:ring-4 focus:ring-[#00a2b9]/10 transition-all",step:"0.01",min:"0"})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Stock ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(i.Package,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,b.jsx)("input",{type:"number",placeholder:"0",value:t,onChange:a=>u(a.target.value),className:"w-full border-2 border-gray-200 rounded-xl pl-11 pr-4 py-3 focus:outline-none focus:border-[#00a2b9] focus:ring-4 focus:ring-[#00a2b9]/10 transition-all",min:"0"})]})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Product Image ",!f&&(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("div",{className:"relative border-2 border-dashed border-gray-300 rounded-xl p-6 hover:border-[#00a2b9] transition-all bg-gray-50 hover:bg-[#00a2b9]/5",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{if(!a.target.files)return;let b=a.target.files[0];if(b){if(!["image/png","image/jpeg","image/jpg","image/gif"].includes(b.type))return void A("Only PNG, JPEG, JPG or GIF files are allowed.");A(""),w(b)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"file-upload"}),(0,b.jsxs)("label",{htmlFor:"file-upload",className:"flex flex-col items-center cursor-pointer",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-[#00a2b9]/10 rounded-full flex items-center justify-center mb-3",children:v?(0,b.jsx)(n,{className:"w-8 h-8 text-[#00a2b9]"}):(0,b.jsx)(k,{className:"w-8 h-8 text-[#00a2b9]"})}),(0,b.jsx)("p",{className:"text-sm font-medium text-gray-700",children:v?v.name:"Click to upload or drag and drop"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, JPEG or GIF (max. 10MB)"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-2",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-6 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-all duration-200 active:scale-95",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:x,className:"flex-1 px-6 py-3 bg-gradient-to-r from-[#00a2b9] to-[#00c8d7] hover:from-[#008899] hover:to-[#00a2b9] text-white font-semibold rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed active:scale-95 flex items-center justify-center gap-2",children:x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,b.jsx)(b.Fragment,{children:f?"Update Product":"Add Product"})})]})]})]})]})})}let p=({id_producto:a,nombre:g,descripcion:j,precio:k,stock:l,imagen_url:m,onDeleteSuccess:n})=>{let[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!1),t=async()=>{if(confirm(`Are you sure you want to delete "${g}"?`))try{let b=await fetch(`${e.API_BASE_URL}/api/products/${a}`,{method:"DELETE"});if(!b.ok){let a=await b.json();a.error?.includes("associated orders")?alert("Cannot delete this product because it has associated orders."):alert("Failed to delete product.");return}alert("Product deleted successfully!"),n()}catch(a){console.error(a),alert("An error occurred while deleting the product.")}},u=e.API_BASE_URL+m||"/default-product.png",v=l<10;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"group relative bg-white rounded-2xl border border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-2xl hover:-translate-y-1",children:[v&&(0,b.jsxs)("div",{className:"absolute top-3 left-3 z-10 bg-red-500 text-white text-xs font-semibold px-3 py-1 rounded-full shadow-lg flex items-center gap-1",children:[(0,b.jsx)(i.Package,{size:12})," Low Stock"]}),(0,b.jsxs)("div",{className:"relative w-full h-72 bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[(0,b.jsx)(d.default,{src:u,alt:g,fill:!0,className:"object-cover transition-transform duration-500 group-hover:scale-110"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2 line-clamp-1 group-hover:text-blue-600 transition-colors",children:g}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2 min-h-[40px]",children:j||"No description available"}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-5 pb-5 border-b border-gray-100",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Price"}),(0,b.jsxs)("p",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:["$",k.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Available"}),(0,b.jsxs)("p",{className:`text-lg font-semibold ${v?"text-red-500":"text-gray-700"}`,children:[l," units"]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>s(!0),className:"flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-amber-400 to-orange-500 hover:from-amber-500 hover:to-orange-600 text-white font-medium px-4 py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg active:scale-95",children:[(0,b.jsx)(h,{size:18})," Edit"]}),(0,b.jsxs)("button",{onClick:t,disabled:p,className:"flex-1 flex items-center justify-center gap-2 bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white font-medium px-4 py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed active:scale-95",children:[(0,b.jsx)(f.Trash2,{size:18})," ",p?"Deleting...":"Delete"]})]})]})]}),r&&(0,b.jsx)(o,{isOpen:r,onClose:()=>s(!1),productToEdit:{id_producto:a,nombre:g,descripcion:j,precio:k,stock:l,imagen_url:m},onProductUpdated:n})]})};function q(){let[a,d]=(0,c.useState)([]),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)("asc"),[l,m]=(0,c.useState)(1),[n]=(0,c.useState)(8),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(void 0),u=async()=>{try{let a=await fetch(`${e.API_BASE_URL}/api/products`),b=await a.json();Array.isArray(b)?(d(b),g(b)):(d([]),g([]))}catch(a){console.error("Error fetching products:",a)}};(0,c.useEffect)(()=>{u()},[]),(0,c.useEffect)(()=>{g(a.filter(a=>`${a.nombre} ${a.descripcion||""}`.toLowerCase().includes(h.toLowerCase()))),m(1)},[h,a]),(0,c.useEffect)(()=>{g([...f].sort((a,b)=>"asc"===j?a.precio-b.precio:b.precio-a.precio))},[j]);let v=Math.ceil(f.length/n),w=(l-1)*n,x=f.slice(w,w+n);return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-[#00a2b9]",children:"Products"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search products...",value:h,onChange:a=>i(a.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-60 focus:ring-2 focus:ring-[#00a2b9] outline-none"}),(0,b.jsxs)("select",{value:j,onChange:a=>k(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-[#00a2b9]",children:[(0,b.jsx)("option",{value:"asc",children:"Price: Low to High"}),(0,b.jsx)("option",{value:"desc",children:"Price: High to Low"})]}),(0,b.jsx)("button",{className:"bg-[#00a2b9] hover:bg-[#008899] text-white px-4 py-2 rounded-lg font-semibold",onClick:()=>{t(void 0),r(!0)},children:"+ New Product"})]})]}),x.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(a=>(0,b.jsx)(p,{id_producto:a.id_producto,nombre:a.nombre,descripcion:a.descripcion,precio:a.precio,stock:a.stock,imagen_url:a.imagen_url,onDeleteSuccess:u},a.id_producto))}):(0,b.jsx)("p",{className:"text-gray-500 text-center mt-10",children:"No products yet."}),v>1&&(0,b.jsxs)("div",{className:"flex justify-center items-center mt-8 gap-2",children:[(0,b.jsx)("button",{disabled:1===l,onClick:()=>m(a=>a-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"⬅"}),(0,b.jsxs)("span",{className:"text-gray-700",children:["Page ",l," of ",v]}),(0,b.jsx)("button",{disabled:l===v,onClick:()=>m(a=>a+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"➡"})]}),q&&(0,b.jsx)(o,{isOpen:q,onClose:()=>r(!1),productToEdit:s,onProductUpdated:u})]})}a.s(["default",()=>q],631)}];

//# sourceMappingURL=src_app_admin_products_page_tsx_eb8bba15._.js.map