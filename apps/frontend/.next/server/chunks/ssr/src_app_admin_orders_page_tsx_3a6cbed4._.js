module.exports=[32082,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(9941),e=a.i(77156),f=a.i(67453),g=a.i(92106),h=a.i(83497),i=a.i(87532);let j=(0,a.i(70106).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var k=a.i(13749),l=a.i(50522),m=a.i(10227),n=a.i(33508),o=a.i(2759),p=a.i(71987);a.s(["default",0,function(){let[a,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)({key:"id_pedido",direction:null}),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(null);(0,c.useEffect)(()=>{if(L){let a=setTimeout(()=>{M(null)},3e3);return()=>clearTimeout(a)}},[L]),(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch(`${o.API_BASE_URL}/api/orders/`),b=await a.json(),c=await Promise.all(b.map(async a=>{try{let b=await fetch(`${o.API_BASE_URL}/api/customers/${a.id_cliente}`),c=await b.json();return{...a,cliente:c}}catch{return{...a,cliente:void 0}}}));q(c)}catch(a){console.error("Error fetching orders:",a),M("Error: Could not fetch orders.")}finally{s(!1)}})()},[]);let N=(0,c.useMemo)(()=>a.filter(a=>{let b=t.toLowerCase(),c=(a.cliente?.nombre?.toLowerCase()||"").includes(b)||a.id_pedido.toString().includes(b),d=!!z||!["completed"].includes(a.estatus.toLowerCase());return c&&d}),[a,t,z]),O=(0,c.useMemo)(()=>v.direction?[...N].sort((a,b)=>{let c=v.key,d="cliente"===c?a.cliente?.nombre||"":a[c],e="cliente"===c?b.cliente?.nombre||"":b[c];return("string"==typeof d&&(d=d.toLowerCase()),"string"==typeof e&&(e=e.toLowerCase()),d<e)?"asc"===v.direction?-1:1:d>e?"asc"===v.direction?1:-1:0}):N,[N,v]),P=Math.ceil(O.length/10),Q=O.slice((x-1)*10,10*x),R=async a=>{if(D===a){C(null),E(null);return}try{let b=await fetch(`${o.API_BASE_URL}/api/order-details/order/${a}`),c=await b.json();C(c),E(a)}catch(a){console.error("Error fetching order details:",a),M("Error: Could not fetch order details.")}},S=()=>{G(!1),I(null),K("")},T=async(a,b,c)=>{let d={...a};d.estatus=b,d.notificado=!0,"shipped"===b&&(d.trackingnumber=c);let{cliente:e,...f}=d;try{await fetch(`${o.API_BASE_URL}/api/orders/${a.id_pedido}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),q(d=>d.map(d=>d.id_pedido===a.id_pedido?{...d,estatus:b,trackingnumber:c||d.trackingnumber}:d)),M(`âœ… Order #${a.id_pedido} updated to "${b}"`)}catch(a){console.error("Error updating order:",a),M("âŒ Error updating order.")}};return r?(0,b.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"w-16 h-16 border-4 border-[#00a2b9] border-t-transparent rounded-full animate-spin mb-4"}),(0,b.jsx)("p",{className:"text-gray-600 font-medium",children:"Loading orders..."})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 md:p-8",children:[(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-[#00a2b9] to-[#00c8d7] bg-clip-text text-transparent flex items-center gap-3",children:[(0,b.jsx)(h.Package,{className:"text-[#00a2b9]",size:32}),"Orders Management"]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:"Manage and track all customer orders"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 lg:w-72",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,b.jsx)("input",{className:"w-full border-2 border-gray-200 rounded-xl pl-10 pr-4 py-3 focus:ring-4 focus:ring-[#00a2b9]/10 focus:border-[#00a2b9] focus:outline-none transition-all",placeholder:"Search by customer or ID...",value:t,onChange:a=>u(a.target.value)})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 px-4 py-3 bg-gray-50 rounded-xl border-2 border-gray-200 hover:border-[#00a2b9] transition-all cursor-pointer group",children:[(0,b.jsx)(j,{className:"text-gray-400 group-hover:text-[#00a2b9] transition-colors",size:18}),(0,b.jsx)("input",{type:"checkbox",checked:z,onChange:()=>A(!z),className:"w-4 h-4 accent-[#00a2b9] cursor-pointer"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show completed"})]})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full text-sm",children:[(0,b.jsx)("thead",{className:"bg-gradient-to-r from-[#00a2b9] to-[#00c8d7] text-white",children:(0,b.jsxs)("tr",{children:[[{key:"id_pedido",label:"Order #"},{key:"cliente",label:"Customer"},{key:"fecha_pedido",label:"Date"},{key:"estatus",label:"Status"},{key:"total",label:"Total"},{key:"trackingnumber",label:"Tracking #"}].map(a=>(0,b.jsx)("th",{onClick:()=>{var b;return b=a.key,void w(a=>{if(a.key===b){if("asc"===a.direction)return{key:b,direction:"desc"};if("desc"===a.direction)return{key:b,direction:null}}return{key:b,direction:"asc"}})},className:"px-6 py-4 text-left cursor-pointer select-none hover:bg-white/10 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 font-semibold",children:[a.label," ",(0,b.jsx)(d.ArrowUpDown,{size:16,className:"opacity-70"})]})},a.key)),(0,b.jsx)("th",{className:"px-6 py-4 text-left font-semibold",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===Q.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:7,className:"px-6 py-12 text-center",children:[(0,b.jsx)(h.Package,{className:"mx-auto mb-3 text-gray-300",size:48}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"No orders found"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Try adjusting your search or filters"})]})}):Q.map(a=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("span",{className:"font-semibold text-[#00a2b9]",children:["#",a.id_pedido]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.cliente?.nombre||"â€”"}),a.cliente?.correo&&(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.cliente.correo})]})}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-600",children:new Date(a.fecha_pedido).toLocaleDateString()}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold capitalize ${"pending"===a.estatus.toLowerCase()?"bg-yellow-100 text-yellow-800":"shipped"===a.estatus.toLowerCase()?"bg-blue-100 text-blue-800":"completed"===a.estatus.toLowerCase()?"bg-green-100 text-green-800":"bg-gray-200 text-gray-600"}`,children:a.estatus})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("span",{className:"font-bold text-gray-900 text-base",children:["$",a.total.toFixed(2)]})}),(0,b.jsx)("td",{className:"px-6 py-4 font-mono text-xs text-gray-700",children:a.trackingnumber||"â€”"}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>R(a.id_pedido),className:"p-2 text-[#00a2b9] hover:bg-[#00a2b9]/10 rounded-lg transition-all hover:scale-110",title:"View details",children:(0,b.jsx)(e.Eye,{size:18})}),(0,b.jsxs)("button",{onClick:()=>{let b;"pending"===(b=a.estatus.toLowerCase())?(I(a),K(a.trackingnumber||""),G(!0)):"shipped"===b&&T(a,"completed",a.trackingnumber)},disabled:"completed"===a.estatus.toLowerCase(),className:`p-2 rounded-lg transition-all hover:scale-110 ${"pending"===a.estatus.toLowerCase()?"text-blue-600 hover:bg-blue-50":"shipped"===a.estatus.toLowerCase()?"text-green-600 hover:bg-green-50":"text-gray-400 cursor-not-allowed"}`,title:"pending"===a.estatus.toLowerCase()?"Mark as Shipped":"shipped"===a.estatus.toLowerCase()?"Mark as Completed":"Order Completed",children:["pending"===a.estatus.toLowerCase()&&(0,b.jsx)(m.Truck,{size:18}),"shipped"===a.estatus.toLowerCase()&&(0,b.jsx)(f.CheckCircle2,{size:18}),"completed"===a.estatus.toLowerCase()&&(0,b.jsx)(f.CheckCircle2,{size:18})]}),(0,b.jsx)("button",{onClick:()=>(a=>{if(!a.cliente)return;let b=`
ðŸ§¾ Order #${a.id_pedido}
ðŸ‘¤ Customer: ${a.cliente.nombre}
ðŸ“§ Email: ${a.cliente.correo}
ðŸ“ž Phone: ${a.cliente.telefono}
ðŸ  Address: ${a.cliente.direccion}
ðŸ’° Total: $${a.total.toFixed(2)}
ðŸ“… Date: ${new Date(a.fecha_pedido).toLocaleString()}
 Status: ${a.estatus}
 ${a.trackingnumber?`ðŸšš Tracking: ${a.trackingnumber}`:""}
    `;navigator.clipboard.writeText(b.trim()),M("âœ… Order details copied to clipboard")})(a),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-all hover:scale-110",title:"Copy to clipboard",children:(0,b.jsx)(g.Clipboard,{size:18})})]})})]},a.id_pedido),D===a.id_pedido&&B&&(0,b.jsx)("tr",{className:"bg-gradient-to-r from-[#00a2b9]/5 to-transparent",children:(0,b.jsx)("td",{colSpan:7,className:"p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-inner border-2 border-[#00a2b9]/20",children:[(0,b.jsxs)("h4",{className:"font-bold text-lg text-gray-900 mb-2 flex items-center gap-2",children:[(0,b.jsx)(h.Package,{className:"text-[#00a2b9]",size:20})," Order Details"]}),a.trackingnumber&&(0,b.jsxs)("div",{className:"mb-4 text-sm text-gray-700 bg-blue-50 p-3 rounded-lg",children:[(0,b.jsx)("strong",{children:"Tracking Number:"})," ",(0,b.jsx)("span",{className:"font-mono bg-blue-100 px-2 py-1 rounded",children:a.trackingnumber})]}),(0,b.jsx)("div",{className:"space-y-3",children:B.map(a=>(0,b.jsx)("div",{className:"flex justify-between items-center py-3 border-b border-gray-100 last:border-0",children:a.productos?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(p.default,{src:`${o.API_BASE_URL}${a.productos.imagen_url||"/default-product.png"}`,alt:a.productos.nombre,width:48,height:48,className:"w-12 h-12 rounded-lg object-cover bg-gray-100"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.productos.nombre}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[a.cantidad," Ã— $",a.precio_unitario.toFixed(2)]})]})]}),(0,b.jsxs)("p",{className:"font-bold text-[#00a2b9] text-lg",children:["$",(a.cantidad*a.precio_unitario).toFixed(2)]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center",children:(0,b.jsx)(m.Truck,{className:"w-6 h-6 text-gray-500"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:"Shipping Feedback"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Fix"})]})]}),(0,b.jsxs)("p",{className:"font-bold text-[#00a2b9] text-lg",children:["$",a.precio_unitario.toFixed(2)]})]})},a.id_detalle))})]})})})]}))})]})}),Q.length>0&&(0,b.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex flex-col sm:flex-row justify-between items-center gap-4 border-t",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",(0,b.jsx)("span",{className:"font-semibold",children:(x-1)*10+1})," to ",(0,b.jsx)("span",{className:"font-semibold",children:Math.min(10*x,O.length)})," of ",(0,b.jsx)("span",{className:"font-semibold",children:O.length})," orders"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{disabled:1===x,onClick:()=>y(a=>a-1),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${1===x?"text-gray-400 bg-gray-200 cursor-not-allowed":"text-white bg-[#00a2b9] hover:bg-[#008899] shadow-md hover:shadow-lg"}`,children:[(0,b.jsx)(k.ChevronLeft,{size:16})," Previous"]}),(0,b.jsxs)("button",{disabled:x===P||0===P,onClick:()=>y(a=>a+1),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${x===P||0===P?"text-gray-400 bg-gray-200 cursor-not-allowed":"text-white bg-[#00a2b9] hover:bg-[#008899] shadow-md hover:shadow-lg"}`,children:["Next ",(0,b.jsx)(l.ChevronRight,{size:16})]})]})]})]})]}),F&&H&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex justify-center items-center z-50 p-4 transition-opacity animate-in fade-in-0",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md transform transition-all animate-in zoom-in-95",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,b.jsx)(m.Truck,{className:"text-[#00a2b9]"})," Mark as Shipped"]}),(0,b.jsx)("button",{onClick:S,className:"text-gray-400 hover:text-gray-700 hover:bg-gray-100 p-2 rounded-full",children:(0,b.jsx)(n.X,{size:20})})]}),(0,b.jsxs)("p",{className:"text-gray-600 mb-6",children:["Enter the tracking number for order ",(0,b.jsxs)("strong",{className:"text-[#00a2b9]",children:["#",H.id_pedido]}),"."]}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),H&&T(H,"shipped",J),S()},children:[(0,b.jsx)("label",{htmlFor:"trackingNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tracking Number"}),(0,b.jsx)("input",{id:"trackingNumber",type:"text",value:J,onChange:a=>K(a.target.value),placeholder:"e.g., 1Z999AA10123456784",className:"w-full border-2 border-gray-300 rounded-xl px-4 py-3 focus:ring-4 focus:ring-[#00a2b9]/20 focus:border-[#00a2b9] focus:outline-none transition-all",required:!0}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 mt-8",children:[(0,b.jsx)("button",{type:"button",onClick:S,className:"px-6 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-6 py-3 rounded-xl bg-[#00a2b9] text-white font-semibold hover:bg-[#008899] transition-colors shadow-lg shadow-[#00a2b9]/20",children:"Save and Notify"})]})]})]})}),L&&(0,b.jsx)("div",{className:"fixed bottom-5 right-5 bg-gray-900 text-white px-6 py-3 rounded-xl shadow-lg transition-all animate-in slide-in-from-bottom-5",children:(0,b.jsx)("p",{children:L})})]})}],32082)}];

//# sourceMappingURL=src_app_admin_orders_page_tsx_3a6cbed4._.js.map